// http://wiki.commonjs.org/wiki/Unit_Testing/1.0
//
// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!
//
// Copyright (c) 2011 Jxck
//
// Originally from node.js (http://nodejs.org)
// Copyright Joyent, Inc.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the 'Software'), to
// deal in the Software without restriction, including without limitation the
// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
// sell copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
(function(e){function s(e,t){return t===undefined?""+t:typeof t=="number"&&(isNaN(t)||!isFinite(t))?t.toString():typeof t=="function"||t instanceof RegExp?t.toString():t}function o(e,t){return typeof e=="string"?e.length<t?e:e.slice(0,t):e}function u(e,t,n,r,s){throw new i.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:s})}function a(e,t){e||u(e,!0,t,"==",i.ok)}function f(e,t){return e===t?!0:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:typeof e!="object"&&typeof t!="object"?e==t:h(e,t)}function l(e){return e===null||e===undefined}function c(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function h(e,t){if(l(e)||l(t))return!1;if(e.prototype!==t.prototype)return!1;if(c(e)){if(!c(t))return!1;e=r.call(e);t=r.call(t);return f(e,t)}try{var n=Object.keys(e),i=Object.keys(t),s,o}catch(u){return!1}if(n.length!=i.length)return!1;n.sort();i.sort();for(o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--){s=n[o];if(!f(e[s],t[s]))return!1}return!0}function p(e,t){return!e||!t?!1:t instanceof RegExp?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1}function d(e,t,n,r){var i;if(typeof n=="string"){r=n;n=null}try{t()}catch(s){i=s}r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:".");e&&!i&&u("Missing expected exception"+r);!e&&p(i,n)&&u("Got unwanted exception"+r);if(e&&i&&n&&!p(i,n)||!e&&i)throw i}var t=Object.create||function(e){function t(){}if(!e)throw Error("no type");t.prototype=e;return new t},n={inherits:function(e,n){e.super_=n;e.prototype=t(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}},r=Array.prototype.slice,i=a;e.assert=i;typeof module=="object"&&typeof module.exports=="object"&&(module.exports=i);i.AssertionError=function(t){this.name="AssertionError";this.message=t.message;this.actual=t.actual;this.expected=t.expected;this.operator=t.operator;var n=t.stackStartFunction||u;Error.captureStackTrace&&Error.captureStackTrace(this,n)};n.inherits(i.AssertionError,Error);i.AssertionError.prototype.toString=function(){return this.message?[this.name+":",this.message].join(" "):[this.name+":",o(JSON.stringify(this.actual,s),128),this.operator,o(JSON.stringify(this.expected,s),128)].join(" ")};i.AssertionError.__proto__=Error.prototype;i.fail=u;i.ok=a;i.equal=function(t,n,r){t!=n&&u(t,n,r,"==",i.equal)};i.notEqual=function(t,n,r){t==n&&u(t,n,r,"!=",i.notEqual)};i.deepEqual=function(t,n,r){f(t,n)||u(t,n,r,"deepEqual",i.deepEqual)};i.notDeepEqual=function(t,n,r){f(t,n)&&u(t,n,r,"notDeepEqual",i.notDeepEqual)};i.strictEqual=function(t,n,r){t!==n&&u(t,n,r,"===",i.strictEqual)};i.notStrictEqual=function(t,n,r){t===n&&u(t,n,r,"!==",i.notStrictEqual)};i.throws=function(e,t,n){d.apply(this,[!0].concat(r.call(arguments)))};i.doesNotThrow=function(e,t,n){d.apply(this,[!1].concat(r.call(arguments)))};i.ifError=function(e){if(e)throw e}})(this);